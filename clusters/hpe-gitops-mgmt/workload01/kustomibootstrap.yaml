apiVersion: source.toolkit.fluxcd.io/v1
kind: GitRepository
metadata:
  name: deploy-flux
  namespace: flux-system
spec:
  interval: 5m0s
  url: https://github.com/awseksa/cluster-components
  ref:
    branch: main
  secretRef:
    name: github
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: deploy-flux
  namespace: flux-system
spec:
  interval: 5m
  path: "./components/workload-01/flux-versions/v2.3.0/"
  prune: true
  sourceRef:
    kind: GitRepository
    name: git-components
    namespace: flux-system
  decryption:
    provider: sops
    secretRef:
      name: sops-gpg
  kubeConfig:
    secretRef:
      name: dell-gitops-workload-kubeconfig
---
apiVersion: v1
kind: Secret
metadata:
    name: github
    namespace: flux-system
type: Opaque
stringData:
    username: ENC[AES256_GCM,data:lE55kNfCmQ==,iv:BY1gUPxMakK7totP9llbl6L6Z1ioE7wJtzf9kpL4bRM=,tag:5kp8qkMUuYD/WDpj9T30Sg==,type:str]
    password: ENC[AES256_GCM,data:RMLN6Vwe7CHTQwCkgMDReR1A1v9se/mClAIEP13WFAt5eBT0pEah7A==,iv:qaqcorcPPSc9cjq06G2tNaXdM2e2XIChZthVl4xxoJs=,tag:mG5m6kADZc8fQV7SCNONAA==,type:str]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-11-06T11:57:44Z"
    mac: ENC[AES256_GCM,data:W2ejs5vhjxGpF+IFXSPnmHOn72+BF7epakZPi4ke8VuOWR9U3xWUu6GDTkKJIC5hHoNnCKL5Ku3CWQGq6cnqzqZoNJ9UPCMem6f3QJYEhuTIUlmTnRQvbNdcnlBtJ0UypO1dr/9Alsa+x1aOn9Pszr3utI2LMwphhz8bqgcUFz8=,iv:i2/Ozhpym/+e7OItkf5d6v1bkNvI5N0zEuvJxSWGCL0=,tag:BBTqOd9faab/CynId2u3Dw==,type:str]
    pgp:
        - created_at: "2024-11-06T11:57:44Z"
          enc: |-
            -----BEGIN PGP MESSAGE-----

            hQIMA7cxbW+q6X7VAQ/+LqjHQGuhGnC6w+lPBv4SWYcEt6As2+K7iZ6AXdc846Yl
            VAsQt71A4N+aNZRzCzo/PHCgs4Tj5lU0M+6Jet9RFhFadftAJnpGhzsig/22ONRo
            zClauKNaCKHgOr/HMrqCer9Chh4tyE5lpQMursrgMFb9GrPDvTIUqccbiEGZBHGl
            /lKAgYTtu+g+JzGY20OMxjdyvrRbx4BLj4wNeKASMvRRepPD6qcWN6rspPFneY7c
            Cas+iM/5uy1gPPn6J87dREIPTENHC+KCXknAhhtj/ePWTIO3+2dRj5zJ0dXo8s0+
            2x6RYNMCEMWSAW96/Ah28tGSpzkae1TxjjxF71lN9l3oW+PHuMG3LhH6zZVuA1du
            AdGTJ0uq9LlK95hakDdcze4xUlI+0e7aGp5uSMBRut4i9zn7qbzqaBTtVK4hx1S4
            BUO5nwy45rkTWLkJHLIvpBRLrlH8bdw8/9AEKOoyPZHqa/EXQd7iD+XhrrMXH7hf
            8TkpWH63L44NaET0DGniM87eiDTHAbYewv3wWbMSGdaOQUeTmRZeOQgLXx15j5f4
            r14O+Iyr1CMvrVJHs7nHDMhZ1GjqiUQwBYQmqQCjFLVGsbw3a1upvBmqzgLKcSQo
            wn5KwPHa2rNWVoQiyiRQ8ZF01B+EizjjAm5IutqWkCrYc6viLM8T+EgOuGND6NfS
            XgGUvFi7kCxk8LAkaKE7q6SyTlC/xOT6Gtv7Y0ebnvTmGRP0eMKxdL7YBVZl3UAg
            9GzbC6yxKHi6XMkx0XcpT4muRaBdFvrgBp+oD48QafLnoUKWJfngy5a7ktFCxY4=
            =ATng
            -----END PGP MESSAGE-----
          fp: 7C1C8D4CACEE1A81C196E0798D01222BD13CEAC3
    encrypted_regex: ^(data|stringData)$
    version: 3.9.1
